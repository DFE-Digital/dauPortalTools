% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/quality_render_tests.R
\name{quality_render_tests}
\alias{quality_render_tests}
\title{Render Quality Test Results for an Application}
\usage{
quality_render_tests(app_id = NULL)
}
\arguments{
\item{app_id}{Integer or \code{NULL}.
Optional filter restricting results to a single application.
If \code{NULL}, results for all applications are returned.
If provided, it is safely interpolated into the SQL using
\code{glue::glue_sql()}.}
}
\value{
A \code{shiny.tag} object (UI fragment) containing:
\itemize{
\item a GOV.UK‑styled layout,
\item a download link, and
\item a \code{DT::datatable} widget showing quality‑check results.
}
}
\description{
Generates a GOV.UK-styled UI panel summarising the latest quality‑check
results for one or more applications. The function queries SQL Server for
each quality check, retrieves the most recent run (via \verb{OUTER APPLY}), and
displays results in a searchable, sortable \code{DT::datatable}.
}
\details{
This function is designed to be used inside Shiny, typically within
\code{uiOutput()} / \code{renderUI()}. It also attaches a download handler for exporting
the full quality‑check dataset.

The function:
\itemize{
\item Opens a database connection via \code{sql_manager("dit")}.
\item Constructs a parameterised SQL query using \code{glue_sql()}.
\item Retrieves the most recent quality‑check log entry for each test using
\verb{OUTER APPLY}.
\item Renders the results into a \code{DT::datatable}.
\item Generates a unique ID for a CSV download handler bound to the user's
session.
}

Logging is performed using \code{dauPortalTools::log_event()} to record start and
end times.

A GOV.UK‑themed layout is produced via \code{shinyGovstyle::gov_layout()}.
}
\examples{
\dontrun{
# Render for a specific app
ui <- quality_render_tests(app_id = 12)

# Render for all apps
ui <- quality_render_tests()
}

}
\seealso{
\code{\link[shinyGovstyle]{gov_layout}},
\code{\link[DT]{datatable}},
\code{\link[glue]{glue_sql}}
}
